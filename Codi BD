drop database if exists esqui;
create database esqui;
use esqui;

CREATE TABLE `Usuaris` (
	`DNI` varchar(9) NOT NULL UNIQUE,
	`Nom` varchar(20) NOT NULL,
    `Cognoms` varchar(40) NOT NULL,
	`email` varchar(60) NOT NULL,
    `Telefon` int(9) NOT NULL,
	`Imatge` varchar(60) NOT NULL DEFAULT '/img/defaultuser',
	PRIMARY KEY (`DNI`)
);

CREATE TABLE `Federats` (
	`DNI` varchar(9) NOT NULL,
	`Num_federacio` varchar(6) NOT NULL,
	`Nivell` varchar(5) NOT NULL,
	PRIMARY KEY (`DNI`)
);

CREATE TABLE `Normals` (
	`DNI` varchar(9) NOT NULL,
	PRIMARY KEY (`DNI`)
);

CREATE TABLE `Familia_nombrosa` (
	`DNI` varchar(9) NOT NULL,
	`Num_carnet` varchar(14) NOT NULL,
	PRIMARY KEY (`DNI`)
);

CREATE TABLE `Cursos` (
	`ID_curs` INT NOT NULL AUTO_INCREMENT,
	`Nom` varchar(30) NOT NULL,
	`Descripcio` varchar(255) NOT NULL,
	PRIMARY KEY (`ID_curs`)
);

CREATE TABLE `Colectius` (
	`ID_curs` INT NOT NULL AUTO_INCREMENT,
	PRIMARY KEY (`ID_curs`)
);

CREATE TABLE `Individuals` (
	`ID_curs` INT NOT NULL,
	PRIMARY KEY (`ID_curs`)
);

CREATE TABLE `Competicio` (
	`ID_curs` INT NOT NULL,
	`nivell` varchar(4) NOT NULL,
	PRIMARY KEY (`ID_curs`)
);

CREATE TABLE `Monitors` (
	`DNI` varchar(9) NOT NULL,
	`NSS` int(9) NOT NULL,
	`Nom` varchar(20) NOT NULL,
	`Cognoms` varchar(40) NOT NULL,
	`Telefon` INT(9) NOT NULL,
	`Email` varchar(60) NOT NULL,
	PRIMARY KEY (`DNI`)
);

CREATE TABLE `Ensenya` (
	`DNI` varchar(9) NOT NULL,
	`ID_curs` INT NOT NULL,
	PRIMARY KEY (`DNI`)
);

CREATE TABLE `Realitza` (
	`DNI` varchar(9) NOT NULL,
	`ID_curs` INT NOT NULL,
	`Preu_hora` DECIMAL(3) NOT NULL,
	`Num_hores` INT(2) NOT NULL,
	PRIMARY KEY (`DNI`)
);

CREATE TABLE `Lloga_kit` (
	`DNI` varchar(9) NOT NULL,
	`ID_kit` INT NOT NULL,
	`Data` DATE NOT NULL,
	PRIMARY KEY (`DNI`)
);

CREATE TABLE `Kit` (
	`ID_kit` INT NOT NULL AUTO_INCREMENT,
	`Preu` DECIMAL(6) NOT NULL,
	`Vegades_guardat` INT(6) NOT NULL,
	PRIMARY KEY (`ID_kit`)
);

CREATE TABLE `Conforma_kit` (
	`ID_kit` INT NOT NULL,
	`ID_material` INT NOT NULL,
	PRIMARY KEY (`ID_kit`)
);

CREATE TABLE `Material` (
	`ID_material` INT NOT NULL AUTO_INCREMENT,
	`Marca` varchar(20) NOT NULL,
	`Model` varchar(30) NOT NULL,
	`Vegades_utilitzat` INT(2) NOT NULL,
	`Preu` DECIMAL(6) NOT NULL,
	`Imatge` varchar(60) NOT NULL DEFAULT '/img/defaultmaterial',
	`Estat` BOOLEAN NOT NULL DEFAULT true,
	PRIMARY KEY (`ID_material`)
);

CREATE TABLE `Pals` (
	`ID_material` INT NOT NULL,
	`Altura` DECIMAL NOT NULL,
	PRIMARY KEY (`ID_material`)
);

CREATE TABLE `Esquis` (
	`ID_material` INT NOT NULL,
	`Altura` DECIMAL NOT NULL,
	PRIMARY KEY (`ID_material`)
);

CREATE TABLE `Botes` (
	`ID_material` INT NOT NULL,
	`Talla` DECIMAL NOT NULL,
	PRIMARY KEY (`ID_material`)
);

CREATE TABLE `Lloga_material` (
	`DNI` varchar(9) NOT NULL,
	`ID_material` INT NOT NULL,
	PRIMARY KEY (`DNI`)
);

CREATE TABLE `Usuaris_web` (
	`email` varchar(60) NOT NULL,
	`nomusuari` varchar(20) NOT NULL,
    `contrasenya` varchar(32) NOT NULL,
    PRIMARY KEY (`email`)
);





ALTER TABLE `Lloga_kit` ADD CONSTRAINT `Lloga_kit_fk0` FOREIGN KEY (`DNI`) REFERENCES `Usuaris`(`DNI`);

ALTER TABLE `Lloga_kit` ADD CONSTRAINT `Lloga_kit_fk1` FOREIGN KEY (`ID_kit`) REFERENCES `Kit`(`ID_kit`);

ALTER TABLE `Conforma_kit` ADD CONSTRAINT `Conforma_kit_fk0` FOREIGN KEY (`ID_kit`) REFERENCES `Kit`(`ID_kit`);

ALTER TABLE `Conforma_kit` ADD CONSTRAINT `Conforma_kit_fk1` FOREIGN KEY (`ID_material`) REFERENCES `Material`(`ID_material`);

ALTER TABLE `Pals` ADD CONSTRAINT `Pals_fk0` FOREIGN KEY (`ID_material`) REFERENCES `Material`(`ID_material`);

ALTER TABLE `Esquis` ADD CONSTRAINT `Esquis_fk0` FOREIGN KEY (`ID_material`) REFERENCES `Material`(`ID_material`);

ALTER TABLE `Botes` ADD CONSTRAINT `Botes_fk0` FOREIGN KEY (`ID_material`) REFERENCES `Material`(`ID_material`);

ALTER TABLE `Lloga_material` ADD CONSTRAINT `Lloga_material_fk0` FOREIGN KEY (`DNI`) REFERENCES `Usuaris`(`DNI`);

ALTER TABLE `Lloga_material` ADD CONSTRAINT `Lloga_material_fk1` FOREIGN KEY (`ID_material`) REFERENCES `Material`(`ID_material`);



ALTER TABLE `Colectius` ADD CONSTRAINT `Colectius_fk0` FOREIGN KEY (`ID_curs`) REFERENCES `Cursos`(`ID_curs`);

ALTER TABLE `Individuals` ADD CONSTRAINT `Individuals_fk0` FOREIGN KEY (`ID_curs`) REFERENCES `Cursos`(`ID_curs`);

ALTER TABLE `Competicio` ADD CONSTRAINT `Competicio_fk0` FOREIGN KEY (`ID_curs`) REFERENCES `Cursos`(`ID_curs`);

ALTER TABLE `Ensenya` ADD CONSTRAINT `Ensenya_fk0` FOREIGN KEY (`DNI`) REFERENCES `Monitors`(`DNI`);

ALTER TABLE `Ensenya` ADD CONSTRAINT `Ensenya_fk1` FOREIGN KEY (`ID_curs`) REFERENCES `Cursos`(`ID_curs`);

ALTER TABLE `Realitza` ADD CONSTRAINT `Realitza_fk0` FOREIGN KEY (`DNI`) REFERENCES `Usuaris`(`DNI`);

ALTER TABLE `Realitza` ADD CONSTRAINT `Realitza_fk1` FOREIGN KEY (`ID_curs`) REFERENCES `Cursos`(`ID_curs`);

ALTER TABLE `Federats` ADD CONSTRAINT `Federats_fk0` FOREIGN KEY (`DNI`) REFERENCES `Usuaris`(`DNI`);

ALTER TABLE `Normals` ADD CONSTRAINT `Normals_fk0` FOREIGN KEY (`DNI`) REFERENCES `Usuaris`(`DNI`);

ALTER TABLE `Familia_nombrosa` ADD CONSTRAINT `Familia_nombrosa_fk0` FOREIGN KEY (`DNI`) REFERENCES `Usuaris`(`DNI`);



INSERT INTO Usuaris (DNI, Nom, Cognoms, email, Telefon) VALUES
('47137446G', 'Bruno', 'Tomé Arias', 'brunota.dam1@alumnescostafreda.cat', 785883790),
('67900534A', 'Daniel', 'Alcobé Orellana', 'danielao.dam1@alumnescostafreda.cat',  622914709),
('03595023P', 'Pau', 'Rubio Silva', 'paurs.dam1@alumnescostafreda.cat',  634133599),
('94334295W', 'Sergi', 'Florensa Rojo', 'sergifr.dam1@alumnescostafreda.cat',  688676547),
('23706082M', 'Matías', 'Jurado Rodríguez', 'matiasjr.aif1@alumnescostafreda.cat',  634599574);


INSERT INTO Federats (DNI, Num_federacio, Nivell) VALUES
('47137446G', '463728', 'Alt'),
('67900534A', '463728', 'Alt'),
('03595023P', '463728', 'Mig');



INSERT INTO Cursos (Nom, Descripcio) VALUES
('nom1', 'descripcio1'),
('nom2', 'descripcio2'),
('nom3', 'descripcio3');


#INSERT INTO Colectius (ID_curs) VALUES
#();


#INSERT INTO Individuals (ID_curs) VALUES
#();


INSERT INTO Competicio (ID_curs, nivell) VALUES
(1, 'baix'),
(2, 'mig'),
(3, 'alt');


INSERT INTO Monitors (DNI, NSS, Nom, Cognoms, Telefon, email) VALUES
('84701532F', '487263677','María', 'Jesús Pla', 631588821, 'mariajp@eskydam.com'),
('21374897P', '238946483','Ignacio', 'Segovia Ayala', 635851777, 'ignaciosa@eskydam.com'),
('81240504L', '001058638','Joan', 'Antoni Fernández', 658183599, 'joanaf@eskydam.com'),
('99027727P', '519454651','Yolanda', 'Solsona Fernandez', 634621463, 'yolandasf@eskydam.com');


INSERT INTO  Ensenya (DNI, ID_curs) VALUES
('84701532F', 1),
('21374897P', 2),
('81240504L', 3);


INSERT INTO Realitza (DNI, ID_curs, Preu_hora, Num_hores) VALUES
('47137446G', 1, 20, 4),
('67900534A', 3, 25, 3);


INSERT INTO Material(Marca, Model, Vegades_utilitzat, Preu, Imatge, Estat) VALUES
('Salomon', 'MAX 8 S', 0, 349.99, 'imatge1.jpg', true),
('Dynastar', 'Speed Team Pro Open', 0, 239.91, 'imatge2.jpg', true),
('Wedze', 'FR 500 SLASH 100 H', 0, 259.99, 'imatge3.jpg', true),
('Wedze', 'MT90', 0, 649.99, 'imatge4.jpg', true),
('Dynastar', 'Legend W84', 0, 390.72, 'imatge5.jpg', true),
('Atomic', 'REDSTER G7 X12', 0, 759.99, 'imatge6.jpg', true),
('Rossignol', 'Blackops Sender Freeride', 0, 569.99, 'imatge7.jpg', true),
('Wedze', 'FREERIDE, WEDZE FR 500 SLASH 100', 0, 359.99, 'imatge8.jpg', true),
('Dynastar', 'Legend W 84 Xp', 0, 403.13, 'imatge9.jpg', true),
('Leki', 'AirFoil 3D', 0, 69.95, 'imatgea1.jpg', true)
('Scott', 'SRS Scott', 0, 75, 'imatgea2.jpg', true)
('Wedze', 'FR950 LIGHT', 0, 39.99, 'imatgea3.jpg', true)
('Oneway', 'DIAMOND 14', 0, 69.99, 'imatgea4.jpg', true)
('Kerma', 'Vector Hybrid 6', 0, 51.99, 'imatgea5.jpg', true)
('Inovik', 'XC S POLE 150', 0, 29.99, 'imatgea6.jpg', true)
('Scott', '540 P-lite Black Ultra Lime', 0, 28.13, 'imatgea7.jpg', true)
('Rossignol', 'Tactic Jr Grey - 75', 0, 16.13, 'imatgea8.jpg', true)
('K2', 'Boys Sprout', 0, 24.10, 'imatgea9.jpg', true)
('', '', 0, , 'imatgeb1.jpg', true)
('', '', 0, , 'imatgeb2.jpg', true)
('', '', 0, , 'imatgeb3.jpg', true)
('', '', 0, , 'imatgeb4.jpg', true)
('', '', 0, , 'imatgeb5.jpg', true)
('', '', 0, , 'imatgeb6.jpg', true)
('', '', 0, , 'imatgeb7.jpg', true)
('', '', 0, , 'imatgeb8.jpg', true)
('', '', 0, , 'imatgeb9.jpg', true)
